/*
 * ═══════════════════════════════════════════════════════════════════════
 *  PLANETARY DEFENSE COMMAND - Upgrades Module
 * ═══════════════════════════════════════════════════════════════════════
 *  Αρχείο: 05_Upgrades.cpp
 *  Θεωρία: ΣΥΝΔΥΑΣΜΟΣ ΟΛΩΝ - Variables + If/Else + Loops + Functions
 * ═══════════════════════════════════════════════════════════════════════
 *  
 *  Αυτό το αρχείο συνδυάζει ΟΛΑ όσα έμαθες!
 *  - Μεταβλητές και τύποι
 *  - Συνθήκες και λογικοί τελεστές  
 *  - Βρόχοι για επεξεργασία δεδομένων
 *  - Συναρτήσεις με παραμέτρους
 *
 * ═══════════════════════════════════════════════════════════════════════
 */

#include <iostream>
#include <vector>
#include <string>

using namespace std;

// Δομές δεδομένων για το Upgrade System
// (χρησιμοποιούν UpgradeTower/UpgradePlayer για να μην μπερδεύονται με άλλες δομές)
struct UpgradeTower {
    int level;         // Επίπεδο αναβάθμισης (1-5)
    int damage;        // Βασική ζημιά
    double range;      // Εμβέλεια
    string type;       // "laser", "missile", "plasma"
    int kills;         // Πόσους εχθρούς σκότωσε
};

struct UpgradePlayer {
    string name;
    int money;
    int totalKills;
    int wavesCompleted;
    bool isPremium;
};

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.1: ΥΠΟΛΟΓΙΣΜΟΣ ΚΟΣΤΟΥΣ ΑΝΑΒΑΘΜΙΣΗΣ
// ═══════════════════════════════════════════════════════════════════════

int getUpgradeCost(UpgradeTower tower) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.1: ΤΥΠΟΣ ΜΕ ΠΟΛΛΕΣ ΜΕΤΑΒΛΗΤΕΣ                         │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Κόστος αναβάθμισης = βασικό_κόστος * επίπεδο                   │
    // │                                                                 │
    // │  Βασικό κόστος ανά τύπο:                                        │
    // │  - "laser": 50                                                  │
    // │  - "missile": 75                                                │
    // │  - "plasma": 100                                                │
    // │                                                                 │
    // │  ΠΑΡΑΔΕΙΓΜΑ: Laser tower level 3                                │
    // │  Κόστος = 50 * 3 = 150                                          │
    // └─────────────────────────────────────────────────────────────────┘
    
    int baseCost = 50;  // Default για laser
    
    // TODO: Χρησιμοποίησε if/else για να βρεις το σωστό baseCost
    // HINT: if (tower.type == "missile") baseCost = 75;
    
    return baseCost * tower.level;
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.2: ΕΛΕΓΧΟΣ ΑΝΑΒΑΘΜΙΣΗΣ
// ═══════════════════════════════════════════════════════════════════════

bool canUpgrade(UpgradeTower tower, int playerMoney) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.2: ΠΟΛΛΑΠΛΕΣ ΣΥΝΘΗΚΕΣ                                 │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Ο παίκτης μπορεί να αναβαθμίσει αν:                            │
    // │  1. Το tower δεν είναι max level (level < 5)                    │
    // │  2. ΚΑΙ έχει αρκετά χρήματα για την αναβάθμιση                  │
    // │                                                                 │
    // │  HINT: Χρησιμοποίησε τη συνάρτηση getUpgradeCost()              │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Επέστρεψε true αν πληρούνται ΚΑΙ οι δύο συνθήκες
    
    return false;  // Προσωρινά
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.3: ΥΠΟΛΟΓΙΣΜΟΣ ΝΕΩΝ STATS
// ═══════════════════════════════════════════════════════════════════════

int getUpgradedDamage(UpgradeTower tower) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.3: ΤΥΠΟΣ ΑΝΑΒΑΘΜΙΣΗΣ                                  │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Νέα ζημιά = τρέχουσα_ζημιά * 1.5                               │
    // │  (Στρογγυλοποίησε με (int))                                     │
    // │                                                                 │
    // │  ΠΑΡΑΔΕΙΓΜΑ: damage = 10                                        │
    // │  Νέα ζημιά = 10 * 1.5 = 15                                      │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Υπολόγισε και επέστρεψε τη νέα ζημιά
    
    return tower.damage;  // Προσωρινά (δεν αλλάζει)
}

double getUpgradedRange(UpgradeTower tower) {
    // Η εμβέλεια αυξάνεται κατά 10% με κάθε αναβάθμιση
    // Νέα εμβέλεια = τρέχουσα * 1.1
    
    // TODO: Υπολόγισε και επέστρεψε τη νέα εμβέλεια
    
    return tower.range;  // Προσωρινά
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.4: BONUS ΖΗΜΙΑ ΑΠΟ KILLS
// ═══════════════════════════════════════════════════════════════════════

int getBonusDamageFromKills(UpgradeTower tower) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.4: ΔΙΑΙΡΕΣΗ ΜΕ ΥΠΟΛΟΙΠΟ                               │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Κάθε 10 kills δίνουν +1 bonus damage.                          │
    // │                                                                 │
    // │  ΠΑΡΑΔΕΙΓΜΑ:                                                    │
    // │  - 5 kills → 0 bonus                                            │
    // │  - 10 kills → 1 bonus                                           │
    // │  - 25 kills → 2 bonus                                           │
    // │                                                                 │
    // │  HINT: Χρησιμοποίησε ακέραια διαίρεση (/)                       │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Επέστρεψε tower.kills / 10
    
    return 0;  // Προσωρινά
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.5: ΣΥΝΟΛΙΚΗ ΖΗΜΙΑ ΣΤΟΛΟΥ
// ═══════════════════════════════════════════════════════════════════════

int getTotalFleetDamage(vector<UpgradeTower> towers) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.5: LOOP + ΑΘΡΟΙΣΜΑ + ΣΥΝΑΡΤΗΣΗ                        │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Υπολόγισε τη συνολική ζημιά ΟΛΩΝ των towers.                   │
    // │  Για κάθε tower, η ζημιά = damage + bonus από kills             │
    // │                                                                 │
    // │  ΒΗΜΑΤΑ:                                                        │
    // │  1. int total = 0;                                              │
    // │  2. Για κάθε tower:                                             │
    // │     total += towers[i].damage + getBonusDamageFromKills(towers[i]);│
    // │  3. return total;                                               │
    // └─────────────────────────────────────────────────────────────────┘
    
    int total = 0;
    
    // TODO: Υπολόγισε τη συνολική ζημιά
    
    return total;
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.6: MVP TOWER
// ═══════════════════════════════════════════════════════════════════════

int findMVPTower(vector<UpgradeTower> towers) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.6: ΕΥΡΕΣΗ ΜΕΓΙΣΤΟΥ ΣΕ ΛΙΣΤΑ                           │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Βρες τον δείκτη (index) του tower με τα περισσότερα kills.     │
    // │                                                                 │
    // │  PATTERN:                                                       │
    // │  int maxKills = 0;                                              │
    // │  int mvpIndex = 0;                                              │
    // │  for (...) {                                                    │
    // │      if (towers[i].kills > maxKills) {                          │
    // │          maxKills = towers[i].kills;                            │
    // │          mvpIndex = i;                                          │
    // │      }                                                          │
    // │  }                                                              │
    // └─────────────────────────────────────────────────────────────────┘
    
    if (towers.size() == 0) return -1;
    
    int maxKills = 0;
    int mvpIndex = 0;
    
    // TODO: Βρες το MVP tower
    
    return mvpIndex;
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.7: PLAYER RANK
// ═══════════════════════════════════════════════════════════════════════

string getPlayerRank(UpgradePlayer player) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.7: ΠΟΛΛΑΠΛΑ IF/ELSE                                   │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Επέστρεψε τον τίτλο του παίκτη βάσει total kills:              │
    // │                                                                 │
    // │  kills >= 1000 → "Θρύλος"                                       │
    // │  kills >= 500  → "Ήρωας"                                        │
    // │  kills >= 100  → "Βετεράνος"                                    │
    // │  kills >= 10   → "Μαθητευόμενος"                                │
    // │  αλλιώς       → "Νεοσύλλεκτος"                                  │
    // │                                                                 │
    // │  HINT: Ξεκίνα από το μεγαλύτερο!                                │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Επέστρεψε το σωστό rank
    
    return "Νεοσύλλεκτος";  // Προσωρινά
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.8: DAILY BONUS
// ═══════════════════════════════════════════════════════════════════════

int calculateDailyBonus(UpgradePlayer player, int dayNumber) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.8: ΣΥΝΔΥΑΣΜΟΣ ΣΥΝΘΗΚΩΝ                                │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Bonus = βασικό + wave_bonus + premium_bonus                    │
    // │                                                                 │
    // │  - Βασικό: dayNumber * 10                                       │
    // │  - Wave bonus: wavesCompleted * 5 (αν waves >= 5)               │
    // │  - Premium bonus: +50% επιπλέον (αν isPremium)                  │
    // │                                                                 │
    // │  ΠΑΡΑΔΕΙΓΜΑ (day 3, 10 waves, premium):                         │
    // │  Βασικό: 30                                                     │
    // │  Wave: 50                                                       │
    // │  Σύνολο πριν premium: 80                                        │
    // │  Premium +50%: 80 * 1.5 = 120                                   │
    // └─────────────────────────────────────────────────────────────────┘
    
    int bonus = dayNumber * 10;  // Βασικό
    
    // TODO: Πρόσθεσε wave bonus αν waves >= 5
    
    // TODO: Εφάρμοσε premium bonus (bonus * 1.5)
    
    return bonus;
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.9: TOWER RECOMMENDATION
// ═══════════════════════════════════════════════════════════════════════

string recommendTower(int money, bool hasAirEnemies, int waveNumber) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.9: ΣΎΝΘΕΤΗ ΛΟΓΙΚΗ                                     │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Πρότεινε τον καλύτερο πύργο:                                   │
    // │                                                                 │
    // │  - Αν hasAirEnemies AND money >= 100:                           │
    // │    return "missile" (ο μόνος που χτυπάει αέρα)                  │
    // │                                                                 │
    // │  - Αν waveNumber >= 10 AND money >= 150:                        │
    // │    return "plasma" (για δύσκολα waves)                          │
    // │                                                                 │
    // │  - Αν money >= 50:                                              │
    // │    return "laser" (οικονομικός)                                 │
    // │                                                                 │
    // │  - Αλλιώς: return "none" (δεν φτάνουν τα χρήματα)               │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Υλοποίησε τη λογική
    
    return "none";  // Προσωρινά
}

// ═══════════════════════════════════════════════════════════════════════
// ΑΣΚΗΣΗ 5.10: AUTO-UPGRADE (BONUS CHALLENGE)
// ═══════════════════════════════════════════════════════════════════════

int autoUpgradeAll(vector<UpgradeTower>& towers, int budget) {
    // ┌─────────────────────────────────────────────────────────────────┐
    // │  ΑΣΚΗΣΗ 5.10: LOOP + CONDITIONS + ΜΕΤΑΒΟΛΗ ΤΙΜΩΝ                │
    // ├─────────────────────────────────────────────────────────────────┤
    // │  Αναβάθμισε αυτόματα όσα towers γίνεται με το δοσμένο budget.   │
    // │  Επέστρεψε πόσα χρήματα έμειναν.                                │
    // │                                                                 │
    // │  ΑΛΓΟΡΙΘΜΟΣ:                                                    │
    // │  for κάθε tower:                                                │
    // │      αν canUpgrade(tower, budget):                              │
    // │          cost = getUpgradeCost(tower)                           │
    // │          budget = budget - cost                                 │
    // │          tower.level++                                          │
    // │          tower.damage = getUpgradedDamage(tower)                │
    // │                                                                 │
    // │  ΣΗΜΕΙΩΣΗ: Το vector περνιέται με & (by reference)              │
    // │  για να αλλάξουν πραγματικά τα towers.                          │
    // └─────────────────────────────────────────────────────────────────┘
    
    // TODO: Αναβάθμισε τα towers
    
    return budget;  // Επέστρεψε πόσα έμειναν
}
